# 코드 리뷰 가이드

## 리뷰 체크리스트

### 1. 기능 (Functionality)

- [ ] 요구사항대로 동작하는가?
- [ ] 엣지 케이스 처리가 되어 있는가?
- [ ] 에러 처리가 적절한가?
- [ ] 비즈니스 로직이 올바른가?

### 2. 코드 품질 (Code Quality)

- [ ] 중복 코드가 없는가?
- [ ] 메서드/클래스가 단일 책임을 가지는가?
- [ ] 네이밍이 명확하고 일관성 있는가?
- [ ] 불필요한 주석이 없는가? (코드가 자체 설명적인가?)
- [ ] 복잡도가 적절한가? (너무 깊은 중첩, 긴 메서드)

### 3. 보안 (Security)

- [ ] SQL Injection 취약점이 없는가?
- [ ] XSS 취약점이 없는가?
- [ ] 민감 정보가 하드코딩되지 않았는가?
- [ ] 인증/인가 처리가 적절한가?
- [ ] 입력값 검증이 충분한가?

### 4. 성능 (Performance)

- [ ] N+1 쿼리 문제가 없는가?
- [ ] 불필요한 반복/연산이 없는가?
- [ ] 적절한 인덱스를 사용하는가?
- [ ] 메모리 누수 가능성이 없는가?
- [ ] 캐싱이 필요한 곳에 적용되어 있는가?

### 5. 테스트 (Testing)

- [ ] 단위 테스트가 충분한가?
- [ ] 테스트 케이스가 의미 있는가?
- [ ] 엣지 케이스 테스트가 있는가?
- [ ] 테스트가 독립적으로 실행되는가?

### 6. 유지보수성 (Maintainability)

- [ ] 코드가 이해하기 쉬운가?
- [ ] 적절한 추상화 수준인가?
- [ ] 의존성이 적절한가?
- [ ] 설정이 외부화되어 있는가?

---

## 리뷰 코멘트 작성 가이드

### 코멘트 유형

| 접두사 | 의미 | 예시 |
|--------|------|------|
| `[필수]` | 반드시 수정 필요 | `[필수] null 체크 누락` |
| `[권장]` | 수정 권장 | `[권장] 변수명 개선 필요` |
| `[질문]` | 의도 확인 | `[질문] 이 로직의 목적은?` |
| `[제안]` | 대안 제시 | `[제안] Stream API 사용 고려` |
| `[칭찬]` | 좋은 코드 | `[칭찬] 깔끔한 에러 처리` |

### 좋은 코멘트 예시

```markdown
[필수] NPE 위험
`user.getName()` 호출 전 null 체크가 필요합니다.

// Before
String name = user.getName().toUpperCase();

// After
String name = user != null ? user.getName().toUpperCase() : "";
```

```markdown
[권장] 메서드 추출
이 반복문은 별도 메서드로 추출하면 가독성이 좋아집니다.

private List<UserDto> filterActiveUsers(List<User> users) {
    return users.stream()
        .filter(User::isActive)
        .map(UserDto::from)
        .toList();
}
```

```markdown
[질문] 비즈니스 로직 확인
30일 이후 자동 삭제가 요구사항에 있었나요?
기획서에서 확인이 필요해 보입니다.
```

### 나쁜 코멘트 예시

```markdown
❌ "이거 이상함"
❌ "왜 이렇게 짰어요?"
❌ "이건 아닌 것 같은데..."
```

---

## 언어별 체크포인트

### Java/Spring

```markdown
- [ ] `@Transactional` 범위가 적절한가?
- [ ] `@Async` 사용 시 반환 타입이 올바른가?
- [ ] 생성자 주입을 사용하는가? (필드 주입 X)
- [ ] Optional 사용이 적절한가?
- [ ] Stream API 사용이 적절한가?
- [ ] Lombok 사용이 과하지 않은가?
```

### Python

```markdown
- [ ] Type hints가 있는가?
- [ ] docstring이 있는가?
- [ ] 예외 처리가 구체적인가? (bare except 금지)
- [ ] context manager 사용이 적절한가?
- [ ] 불필요한 global 사용이 없는가?
```

### JavaScript/TypeScript

```markdown
- [ ] TypeScript 타입이 any를 남용하지 않는가?
- [ ] async/await 에러 처리가 되어 있는가?
- [ ] 메모리 누수 (이벤트 리스너 해제) 확인
- [ ] 불필요한 re-render가 없는가? (React)
- [ ] ESLint 규칙을 준수하는가?
```

---

## 리뷰 프로세스

### 1. 셀프 리뷰 (PR 작성자)

PR 생성 전 본인이 먼저 확인:

```markdown
## 셀프 리뷰 체크리스트
- [ ] 코드가 요구사항을 충족하는가?
- [ ] 테스트가 통과하는가?
- [ ] 불필요한 console.log/print 문이 없는가?
- [ ] 디버깅용 코드가 남아있지 않은가?
- [ ] 변경사항 설명이 충분한가?
```

### 2. 피어 리뷰

```markdown
## 리뷰어 역할
1. 기능 동작 확인
2. 코드 품질 검토
3. 테스트 커버리지 확인
4. 문서화 상태 확인
```

### 3. 리뷰 응답

```markdown
## 피드백 응답 방식
- 수정 완료 → "수정했습니다" + 커밋 해시
- 반영하지 않음 → 사유 설명
- 논의 필요 → 질문 또는 대안 제시
```

---

## AI 어시스턴트용 리뷰 Skill

```markdown
# /review skill 구현

1. `git diff` 또는 변경된 파일 목록 확인
2. 각 파일별 변경사항 분석
3. 체크리스트 기반 리뷰:
   - 기능: 로직 오류, 엣지 케이스
   - 보안: 입력 검증, 민감 정보
   - 성능: N+1, 불필요 연산
   - 품질: 네이밍, 중복, 복잡도
4. 문제점 발견 시:
   - [필수]/[권장] 표시
   - 코드 위치 명시 (파일:라인)
   - 수정 제안 (Before/After)
5. 좋은 부분도 언급 ([칭찬])
6. 종합 의견 제시
```

---

## PR 템플릿 예시

```markdown
## 변경 사항
<!-- 이 PR에서 변경된 내용을 설명해주세요 -->

## 변경 유형
- [ ] 버그 수정
- [ ] 새 기능
- [ ] 리팩토링
- [ ] 문서 변경

## 테스트
<!-- 테스트 방법을 설명해주세요 -->
- [ ] 단위 테스트 추가/수정
- [ ] 통합 테스트 추가/수정
- [ ] 수동 테스트 완료

## 체크리스트
- [ ] 코드 스타일 가이드 준수
- [ ] 셀프 리뷰 완료
- [ ] 문서 업데이트 (필요시)

## 관련 이슈
<!-- 예: Closes #123 -->
```

---

**참고**: 리뷰는 코드를 비판하는 것이 아니라 함께 더 나은 코드를 만드는 과정입니다.
